<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mr.zhao</title>
  <subtitle>一艺之成，当尽毕生之力。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://sfdotz.me/"/>
  <updated>2017-06-14T13:42:26.340Z</updated>
  <id>http://sfdotz.me/</id>
  
  <author>
    <name>Mr.zhao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://sfdotz.me/blog/2017/svnServer4.html"/>
    <id>http://sfdotz.me/blog/2017/svnServer4.html</id>
    <published>2017-06-14T13:42:26.340Z</published>
    <updated>2017-06-14T13:42:26.340Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>svnServer3</title>
    <link href="http://sfdotz.me/blog/2017/svnServer3.html"/>
    <id>http://sfdotz.me/blog/2017/svnServer3.html</id>
    <published>2017-06-14T13:34:39.000Z</published>
    <updated>2017-06-14T13:34:39.820Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SVN服务的搭建（二）</title>
    <link href="http://sfdotz.me/blog/2017/svnServer2.html"/>
    <id>http://sfdotz.me/blog/2017/svnServer2.html</id>
    <published>2017-06-14T05:45:32.306Z</published>
    <updated>2017-06-14T13:39:21.058Z</updated>
    
    <content type="html"><![CDATA[<h1 id="如何优雅的管理svn项目"><a href="#如何优雅的管理svn项目" class="headerlink" title="如何优雅的管理svn项目"></a><center>如何优雅的管理svn项目</center></h1><a id="more"></a>
<h2 id="在我的SVN服务的搭建-一-中已经可以正常的使用svn去管理我们的项目，这篇我将介绍如何优雅的去管理多个svn项目"><a href="#在我的SVN服务的搭建-一-中已经可以正常的使用svn去管理我们的项目，这篇我将介绍如何优雅的去管理多个svn项目" class="headerlink" title="在我的SVN服务的搭建(一)中已经可以正常的使用svn去管理我们的项目，这篇我将介绍如何优雅的去管理多个svn项目"></a>在我的<a href="http://sfdotz.me/2017/06/11/svnServer1/#more">SVN服务的搭建(一)</a>中已经可以正常的使用svn去管理我们的项目，这篇我将介绍如何优雅的去管理多个svn项目</h2><h3 id="在svn目录下创建不同的仓库"><a href="#在svn目录下创建不同的仓库" class="headerlink" title="在svn目录下创建不同的仓库"></a>在svn目录下创建不同的仓库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">svnadmin create project1</div><div class="line">svnadmin create project2</div><div class="line">svnadmin create project3</div></pre></td></tr></table></figure>
<h3 id="分别配置三个仓库中conf目录下的svnserve-conf"><a href="#分别配置三个仓库中conf目录下的svnserve-conf" class="headerlink" title="分别配置三个仓库中conf目录下的svnserve.conf"></a>分别配置三个仓库中conf目录下的svnserve.conf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">anon-access = none</div><div class="line">auth-access = write <span class="comment">#授权用户可写</span></div><div class="line">password-db = /var/svn/conf/passwd <span class="comment">#使用哪个文件作为账号文件 统一使用密码文件</span></div><div class="line">password-db = /var/svn/conf/authz <span class="comment">#使用哪个文件作为权限文件</span></div><div class="line">realm = project1 <span class="comment"># 认证空间名，版本库所在目录 权限域名，很重要，写你的工程名</span></div></pre></td></tr></table></figure>
<h3 id="创建在password-db与password-db配置的路径中使用的-文件夹及文件"><a href="#创建在password-db与password-db配置的路径中使用的-文件夹及文件" class="headerlink" title="创建在password-db与password-db配置的路径中使用的 文件夹及文件"></a>创建在password-db与password-db配置的路径中使用的 文件夹及文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /opt/svn/conf</div><div class="line">cp /opt/svn/project1/conf/authz passwd  /opt/svn/conf</div></pre></td></tr></table></figure>
<h3 id="修改-opt-svn-conf下的两个文件，统一配置所有项目"><a href="#修改-opt-svn-conf下的两个文件，统一配置所有项目" class="headerlink" title="修改/opt/svn/conf下的两个文件，统一配置所有项目"></a>修改/opt/svn/conf下的两个文件，统一配置所有项目</h3><ol>
<li>修改passwd文件，把所有项目用到的用户统一配置在这个文件中</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">vim passwd</div><div class="line">	[users]</div><div class="line">	    <span class="comment">#项目一的用户</span></div><div class="line">	    user1 = 123</div><div class="line">	    <span class="comment">#项目二的用户</span></div><div class="line">	    user2 = 123</div><div class="line">	    <span class="comment">#项目三的用户</span></div><div class="line">	    user3 = 123</div></pre></td></tr></table></figure>
<ol>
<li>修改authz文件，统一配置每个项目的用户所拥有的权限</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">vim authz</div><div class="line">    <span class="comment">#为用户分组</span></div><div class="line">	[groups]</div><div class="line">	    admin = user1,user2</div><div class="line">	    guest = user3,user2</div><div class="line">	<span class="comment">#为每个项目分配用户及权限</span></div><div class="line">	[目录/project1:/] <span class="comment">#项目1的访问控制，guest无法访问 </span></div><div class="line">	@admin = rw </div><div class="line">	</div><div class="line">	[project2:/]  <span class="comment">#项目2的访问控制</span></div><div class="line">	@guest = rw</div><div class="line"></div><div class="line">	[project3:/]  <span class="comment">#项目3的访问控制</span></div><div class="line">	@admin = rw</div><div class="line">	@guest = r</div></pre></td></tr></table></figure>
<h3 id="对passwd与authz这两个文件的修改立即生效，不需要重启svn服务。"><a href="#对passwd与authz这两个文件的修改立即生效，不需要重启svn服务。" class="headerlink" title="对passwd与authz这两个文件的修改立即生效，不需要重启svn服务。"></a>对passwd与authz这两个文件的修改立即生效，不需要重启svn服务。</h3><h4 id="如果你不相信，或者你是强迫症患者，附上重启svn服务的代码"><a href="#如果你不相信，或者你是强迫症患者，附上重启svn服务的代码" class="headerlink" title="如果你不相信，或者你是强迫症患者，附上重启svn服务的代码"></a>如果你不相信，或者你是强迫症患者，附上重启svn服务的代码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/svnserve -d -r /var/svn/</div></pre></td></tr></table></figure>
<h4 id="不要使用系统提供的"><a href="#不要使用系统提供的" class="headerlink" title="不要使用系统提供的"></a>不要使用系统提供的</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/svnserve start</div></pre></td></tr></table></figure>
<p>来启动，因为系统默认的启动脚本中没有使用 –r /svn/project参数指定一个资源。这种情况下启动的svn服务，客户端连接会提示“svn: No repository found in ‘svn://ip/project’ ”这样的错误。</p>
<h3 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h3><h4 id="经过上面的修改如果我们要增加一个svn仓库，并完成配置，只需要一下几个命令："><a href="#经过上面的修改如果我们要增加一个svn仓库，并完成配置，只需要一下几个命令：" class="headerlink" title="经过上面的修改如果我们要增加一个svn仓库，并完成配置，只需要一下几个命令："></a>经过上面的修改如果我们要增加一个svn仓库，并完成配置，只需要一下几个命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">svnadmin create svn/project</div><div class="line"><span class="comment"># 配置poject/conf/svnserve.conf</span></div><div class="line"><span class="comment"># 配置svn/conf/passwd</span></div><div class="line"><span class="comment"># 配置svn/conf/authz</span></div><div class="line"><span class="comment"># 完成</span></div></pre></td></tr></table></figure>
<p>经过上面的介绍，相信你们对svn项目的管理和配置有初步的了解，如果你有问题，请在下方留言</p>
<blockquote>
<h2><center>在一个崇高的目标支持下，不停地工作，即使慢，也一定会获得成功。</center></h2></blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;如何优雅的管理svn项目&quot;&gt;&lt;a href=&quot;#如何优雅的管理svn项目&quot; class=&quot;headerlink&quot; title=&quot;如何优雅的管理svn项目&quot;&gt;&lt;/a&gt;&lt;center&gt;如何优雅的管理svn项目&lt;/center&gt;&lt;/h1&gt;
    
    </summary>
    
      <category term="学习" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="linux" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/linux/"/>
    
      <category term="服务搭建" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="服务搭建" scheme="http://sfdotz.me/tags/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
      <category term="linux" scheme="http://sfdotz.me/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>SVN服务的搭建（一）</title>
    <link href="http://sfdotz.me/blog/2017/svnServer1.html"/>
    <id>http://sfdotz.me/blog/2017/svnServer1.html</id>
    <published>2017-06-11T09:54:56.717Z</published>
    <updated>2017-06-14T13:38:57.617Z</updated>
    
    <content type="html"><![CDATA[<h1 id="svn基础教程"><a href="#svn基础教程" class="headerlink" title="svn基础教程"></a><center>svn基础教程</center></h1><a id="more"></a>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li><p>安装svn软件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install subversion</div></pre></td></tr></table></figure>
</li>
<li><p>判断是否安装成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svnserve  --version</div></pre></td></tr></table></figure>
</li>
<li><p>安装成功后，建立svn仓库,下面的命令以我的svn（/opt/svn/repos）仓库为例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir /opt/svn/repos</div></pre></td></tr></table></figure>
</li>
<li><p>执行完上面的命令后，进入到你的svn仓库会有如下文件，分别为conf,db,format,hooks, locks,README.txt，生成的这些文件我们只用到了conf文件夹，其它的文件夹不需要动    </p>
</li>
</ol>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="进入svn仓库的conf目录下进行配置，需要配置以下三个文件："><a href="#进入svn仓库的conf目录下进行配置，需要配置以下三个文件：" class="headerlink" title="进入svn仓库的conf目录下进行配置，需要配置以下三个文件："></a>进入svn仓库的conf目录下进行配置，需要配置以下三个文件：</h4><ul>
<li>passwd : 设置用户名和密码</li>
<li>authz ： 用来控制权限，可以设置哪些用户可以访问哪些目录</li>
<li>svnserve ： 设置svn仓库的相关操作</li>
</ul>
<ol>
<li><p>先设置用户名和密码，修改passwd文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#按照 用户名=密码 的格式</span></div><div class="line">[users]</div><div class="line">	zhangsan = 123</div><div class="line">	lisi = 1234</div><div class="line">	wangwu = 123456</div></pre></td></tr></table></figure>
</li>
<li><p>在设置用户对应的权限，修改authz文件  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  [/]</div><div class="line">zhangsan = rw</div><div class="line">lisi = rw</div><div class="line">wangwu = r</div></pre></td></tr></table></figure>
<p> 即张三和李四用户对根目录有读写权限，王五用户对根目录只有读权限</p>
</li>
<li><p>配置svn仓库，修改svnserve文件</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">anon-access = none <span class="comment"># 使非授权用户无法访问</span></div><div class="line">auth-access = write <span class="comment"># 使授权用户有写权限</span></div><div class="line">password-db = password <span class="comment">#使用哪个文件作为账号文件 统一使用密码文件 </span></div><div class="line">authz-db = authz   <span class="comment"># 使用哪个文件作为权限文件 </span></div><div class="line">realm = /opt/svn/repos <span class="comment"># 认证空间名，仓库所在目录，如果写你的工程名</span></div></pre></td></tr></table></figure>
<pre><code>**!!! 以上语句都必须顶格写, 左侧不能留空格, 否则会出错**
**!!!以上语句都必须顶格写, 左侧不能留空格, 否则会出错**
**!!!以上语句都必须顶格写, 左侧不能留空格, 否则会出错**
</code></pre><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><ol>
<li>启动</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">svn: svnserve -d -r /opt/svn/repos</div><div class="line">```  </div><div class="line"></div><div class="line">其中 -d 表示守护进程， -r 表示在后台执行 /opt/svn/repos 为svn的仓库</div><div class="line">如果已经有svn在运行，可以换一个端口运行</div><div class="line"></div><div class="line">``` bash</div><div class="line">svnserve -d -r /opt/svn/repos --listen-port 3391</div></pre></td></tr></table></figure>
<p>同一台服务器可以运行多个svnserver</p>
<ol>
<li>windows客户端使用TortoiseSVN， 连接地址为: svn://your server address</li>
<li>关闭svn服务<br>查看svn服务进程号</li>
</ol>
<pre><code class="bash">netstat -ntlp 
<span class="built_in">kill</span> 进程号
</code></pre>
<h3 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h3><ul>
<li>服务器的指定端口号没有开放</li>
<li>端口号被其它服务占用</li>
<li>若你的服务器为云服务器，记得配置安全组，将指定端口号开放</li>
</ul>
<h4 id="问题解决办法自行google或者参考我的其它博文"><a href="#问题解决办法自行google或者参考我的其它博文" class="headerlink" title="问题解决办法自行google或者参考我的其它博文"></a>问题解决办法自行google或者参考我的其它博文</h4><p>以上配置博主亲测有效，使用腾讯云的服务器，系统环境为CentOs7，如有问题请在下方留言。</p>
<p align="right">持续更新中。。。。</p>

<blockquote>
<h3 id="即使我走得很慢，但是我從來不會後退。"><a href="#即使我走得很慢，但是我從來不會後退。" class="headerlink" title="即使我走得很慢，但是我從來不會後退。"></a><center>即使我走得很慢，但是我從來不會後退。</center></h3></blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;svn基础教程&quot;&gt;&lt;a href=&quot;#svn基础教程&quot; class=&quot;headerlink&quot; title=&quot;svn基础教程&quot;&gt;&lt;/a&gt;&lt;center&gt;svn基础教程&lt;/center&gt;&lt;/h1&gt;
    
    </summary>
    
      <category term="学习" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="linux" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/linux/"/>
    
      <category term="服务搭建" scheme="http://sfdotz.me/categories/%E5%AD%A6%E4%B9%A0/linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="服务搭建" scheme="http://sfdotz.me/tags/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
      <category term="linux" scheme="http://sfdotz.me/tags/linux/"/>
    
  </entry>
  
</feed>
